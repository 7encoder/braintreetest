/**
 * Gravity Forms Braintree Hosted Fields Styling
 * Goal: Match native GF Credit Card field look & interaction.
 * Assumes GF 2.7+ default front-end styling.
 */

:root {
  /* Adjustable design tokens – mirror GF feel */
  --gf-braintree-border: #8c8f94;
  --gf-braintree-border-hover: #5b5f64;
  --gf-braintree-border-focus: #3582c4;
  --gf-braintree-border-error: #d63638;
  --gf-braintree-border-valid: #2f855a;
  --gf-braintree-bg: #ffffff;
  --gf-braintree-bg-disabled: #f0f0f1;
  --gf-braintree-text: #1d2327;
  --gf-braintree-text-soft: #6d6d6d;
  --gf-braintree-radius: 3px;
  --gf-braintree-focus-shadow: 0 0 0 1px var(--gf-braintree-border-focus);
  --gf-braintree-error-shadow: 0 0 0 1px var(--gf-braintree-border-error);
  --gf-braintree-valid-shadow: 0 0 0 1px var(--gf-braintree-border-valid);
  --gf-braintree-transition: 0.15s ease;
  --gf-braintree-brand-size: 34px;
  --gf-braintree-brand-height: 22px;
  --gf-braintree-font-size: 16px;
  --gf-braintree-label-font-size: 14px;
  --gf-braintree-label-weight: 600;
}

/* Wrapper provides spacing similar to native credit card field group */
.gf-braintree-wrapper {
  margin: 0 0 1.25rem;
  max-width: 640px;
  position: relative;
  font-family: inherit;
}

/* Layout: number on its own line, then a row of compact fields */
.gf-braintree-row {
  display: flex;
  flex-wrap: wrap;
  gap: 0.75rem;
  margin-top: 0.75rem;
}

.gf-braintree-field {
  flex: 1 1 140px;
  min-width: 140px;
  position: relative;
  font-family: inherit;
}

/* Card number field often wider – you can force: */
.gf-braintree-card-number {
  width: 100%;
  flex: 1 1 100%;
}

/* Labels – mimic GF default */
.gf-braintree-field > label,
.gf-braintree-field .gform-field-label {
  display: block;
  font-size: var(--gf-braintree-label-font-size);
  font-weight: var(--gf-braintree-label-weight);
  line-height: 1.3;
  margin: 0 0 4px;
  color: var(--gf-braintree-text);
}

/* Hosted field container (span) acts as visible input shell */
.gf-braintree-field .bt-hosted-field {
  display: block;
  width: 100%;
  min-height: 42px;
  box-sizing: border-box;
  border: 1px solid var(--gf-braintree-border);
  border-radius: var(--gf-braintree-radius);
  background: var(--gf-braintree-bg);
  padding: 8px 10px;
  transition: border-color var(--gf-braintree-transition), box-shadow var(--gf-braintree-transition), background-color var(--gf-braintree-transition);
  position: relative;
  font-size: var(--gf-braintree-font-size);
  line-height: 1.35;
}

/* Remove weird inline clearers appended by library */
.gf-braintree-field .bt-hosted-field > div[style*="clear"] {
  display: none !important;
}

/* Hover */
.gf-braintree-field .bt-hosted-field:hover {
  border-color: var(--gf-braintree-border-hover);
}

/* Focus (JS adds .is-focus to .gf-braintree-field) */
.gf-braintree-field.is-focus .bt-hosted-field {
  border-color: var(--gf-braintree-border-focus);
  box-shadow: var(--gf-braintree-focus-shadow);
  outline: none;
}

/* Valid */
.gf-braintree-field.is-valid .bt-hosted-field {
  border-color: var(--gf-braintree-border-valid);
  box-shadow: var(--gf-braintree-valid-shadow);
}

/* Invalid / error */
.gf-braintree-field.is-invalid .bt-hosted-field {
  border-color: var(--gf-braintree-border-error);
  box-shadow: var(--gf-braintree-error-shadow);
}

/* Disabled state (not common) */
.gf-braintree-field.is-disabled .bt-hosted-field {
  background: var(--gf-braintree-bg-disabled);
  color: var(--gf-braintree-text-soft);
}

/* Message area (general / first error) */
.gf-braintree-messages {
  font-size: 13px;
  margin-top: 0.6rem;
  color: var(--gf-braintree-border-error);
  min-height: 1em;
}

/* Card brand badge (optional) */
.gf-braintree-brand-badge {
  position: absolute;
  top: 50%;
  right: 10px;
  width: var(--gf-braintree-brand-size);
  height: var(--gf-braintree-brand-height);
  transform: translateY(-50%);
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 11px;
  font-weight: 600;
  letter-spacing: .5px;
  color: #555;
  background: #f0f0f1;
  border: 1px solid #d0d0d2;
  border-radius: 3px;
  pointer-events: none;
  opacity: 0;
  transition: opacity var(--gf-braintree-transition), background-color var(--gf-braintree-transition), color var(--gf-braintree-transition);
  line-height: 1;
  text-transform: uppercase;
  z-index: 2;
}

.gf-braintree-field.has-brand .gf-braintree-brand-badge {
  opacity: 1;
}

/* Brand color variants (if using letter codes) */
.gf-braintree-field.brand-visa .gf-braintree-brand-badge        { background:#1a1f71; color:#fff; }
.gf-braintree-field.brand-mastercard .gf-braintree-brand-badge  { background:#ff5f00; color:#fff; }
.gf-braintree-field.brand-amex .gf-braintree-brand-badge        { background:#2e77bb; color:#fff; }
.gf-braintree-field.brand-discover .gf-braintree-brand-badge    { background:#86b817; color:#fff; }
.gf-braintree-field.brand-diners .gf-braintree-brand-badge      { background:#0069aa; color:#fff; font-size:10px; }
.gf-braintree-field.brand-jcb .gf-braintree-brand-badge         { background:#0b4ea2; color:#fff; font-size:10px; }
.gf-braintree-field.brand-unionpay .gf-braintree-brand-badge    { background:#d81e06; color:#fff; font-size:10px; }

/* Provide text via data attribute */
.gf-braintree-field.has-brand .gf-braintree-brand-badge::before {
  content: attr(data-brand-short);
}

/* Adjust padding if brand badge shown so text doesn't run under badge */
.gf-braintree-field.has-brand .bt-hosted-field {
  padding-right: calc(var(--gf-braintree-brand-size) + 14px);
}

/* Responsive stacking */
@media (max-width: 640px) {
  .gf-braintree-row {
    gap: 0.65rem;
  }
}
@media (max-width: 480px) {
  .gf-braintree-row {
    flex-direction: column;
  }
  .gf-braintree-field {
    min-width: 100%;
  }
}

/* Dark mode (optional). Add class gf-braintree-dark to wrapper or rely on media query */
.gf-braintree-wrapper.gf-braintree-dark .bt-hosted-field {
  background:#1e1f23;
  border-color:#444a51;
  color:#e5e7eb;
}
.gf-braintree-wrapper.gf-braintree-dark .bt-hosted-field:hover {
  border-color:#5f6670;
}
.gf-braintree-wrapper.gf-braintree-dark .gf-braintree-field.is-focus .bt-hosted-field {
  border-color:#4ea3e4;
  box-shadow:0 0 0 1px #4ea3e4;
}
.gf-braintree-wrapper.gf-braintree-dark .gf-braintree-field.is-invalid .bt-hosted-field {
  border-color:#f87171;
  box-shadow:0 0 0 1px #f87171;
}
.gf-braintree-wrapper.gf-braintree-dark .gf-braintree-field.is-valid .bt-hosted-field {
  border-color:#34d399;
  box-shadow:0 0 0 1px #34d399;
}
.gf-braintree-wrapper.gf-braintree-dark .gf-braintree-brand-badge {
  background:#30343a;
  border-color:#555b63;
  color:#cdd2d7;
}
.gf-braintree-wrapper.gf-braintree-dark .gf-braintree-field.brand-visa .gf-braintree-brand-badge        { background:#21408a; }
.gf-braintree-wrapper.gf-braintree-dark .gf-braintree-field.brand-mastercard .gf-braintree-brand-badge  { background:#ff6f11; }
.gf-braintree-wrapper.gf-braintree-dark .gf-braintree-field.brand-amex .gf-braintree-brand-badge        { background:#3388d5; }
.gf-braintree-wrapper.gf-braintree-dark .gf-braintree-field.brand-discover .gf-braintree-brand-badge    { background:#8bc52a; }
.gf-braintree-wrapper.gf-braintree-dark .gf-braintree-field.brand-diners .gf-braintree-brand-badge      { background:#0b78c5; }
.gf-braintree-wrapper.gf-braintree-dark .gf-braintree-field.brand-jcb .gf-braintree-brand-badge         { background:#105dc0; }
.gf-braintree-wrapper.gf-braintree-dark .gf-braintree-field.brand-unionpay .gf-braintree-brand-badge    { background:#ea2713; }

/* Auto dark (optional – remove if undesired) */
@media (prefers-color-scheme: dark) {
  .gf-braintree-wrapper:not(.gf-braintree-no-auto-dark):not(.gf-braintree-dark) .bt-hosted-field {
    background:#1e1f23;
    border-color:#444a51;
    color:#e5e7eb;
  }
  .gf-braintree-wrapper:not(.gf-braintree-no-auto-dark):not(.gf-braintree-dark) .gf-braintree-field.is-focus .bt-hosted-field {
    border-color:#4ea3e4;
    box-shadow:0 0 0 1px #4ea3e4;
  }
  .gf-braintree-wrapper:not(.gf-braintree-no-auto-dark):not(.gf-braintree-dark) .gf-braintree-field.is-invalid .bt-hosted-field {
    border-color:#f87171;
    box-shadow:0 0 0 1px #f87171;
  }
  .gf-braintree-wrapper:not(.gf-braintree-no-auto-dark):not(.gf-braintree-dark) .gf-braintree-field.is-valid .bt-hosted-field {
    border-color:#34d399;
    box-shadow:0 0 0 1px #34d399;
  }
  .gf-braintree-wrapper:not(.gf-braintree-no-auto-dark):not(.gf-braintree-dark) .gf-braintree-brand-badge {
    background:#30343a;
    border-color:#555b63;
    color:#cdd2d7;
  }
}

/* Utility classes (optional) */
.gf-braintree-hidden { display:none !important; }